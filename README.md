# bianance-replay
# 币安合约账户复盘页面 - 需求说明书

## 一、项目背景

为帮助用户更好地了解自己在币安合约账户中的操作和资金变化轨迹，计划开发一个复盘页面，聚焦“资产变化趋势”、“持仓记录”、“选中仓位详情”三大核心内容，实现日/月/年维度的复盘分析。

---

## 二、核心目标

- 提供资产变化趋势分析（按日、月、年）
- 展示所有开仓记录（按时间线或列表）
- 支持选中某条开仓记录后展示详细信息
- 数据来源为币安合约账户 API（或支持本地数据导入）

---

## 三、页面结构与模块设计

### 1. 页面总览结构

[顶部导航栏]
└── 时间维度切换（今日 / 本月 / 本年）
└── 自定义时间范围选择器
└── 刷新数据按钮

[资产变化趋势图]
└── 折线图：余额、已实现盈亏、未实现盈亏

[持仓记录列表区域]
└── 展示历史所有仓位记录（可分页或时间轴）

[仓位详情模块]
└── 展示选中仓位的详细信息

---

## 四、模块功能说明

### 4.1 时间维度选择与刷新控制

| 功能项 | 说明 |
|--------|------|
| 今日 / 本月 / 本年 切换 | 快速切换预设时间区间 |
| 自定义时间范围 | 支持精确设定起止日期 |
| 刷新按钮 | 手动强制刷新数据 |

---

### 4.2 资产变化趋势图

- **图表类型**：折线图（Echarts / TradingView）
- **X轴**：时间（日或小时）
- **Y轴**：资产数值（USDT）
- **数据曲线**：
  - 账户余额
  - 已实现盈亏
  - 未实现盈亏
- **交互**：
  - 支持缩放与拖动
  - Hover 显示资产详细数值

---

### 4.3 持仓/订单记录展示

| 字段 | 说明 |
|------|------|
| 开仓时间 | 开仓时的时间戳 |
| 合约币种 | 如 BTCUSDT |
| 方向 | 多 / 空 |
| 杠杆倍数 | 如 10x |
| 开仓价格 | 用户实际建仓价格 |
| 平仓价格 | 用户实际平仓价格（如已平） |
| 盈亏 | 实际盈亏金额 |
| 手续费 | 开/平仓手续费合计 |

**功能支持：**
- 点击记录可展开查看详情
- 筛选条件支持：
  - 币种
  - 多空方向
  - 是否已平仓
  - 时间范围

---

### 4.4 仓位详情展示模块

| 字段 | 说明 |
|------|------|
| 合约币种 | BTCUSDT、ETHUSDT 等 |
| 持仓方向 | 多 / 空 |
| 杠杆倍数 | 如 10x |
| 开仓时间 / 价格 / 数量 | 三项 |
| 平仓时间 / 价格 / 数量 | 三项 |
| 手续费明细 | 分开/平仓展示 |
| 盈亏变化图 | 展示该仓位从开仓到平仓的盈亏曲线 |
| 是否触发止盈/止损 | 通过成交记录判断 |
| 是否强平 | 判断是否触发强制平仓事件 |

**展示方式：**
- 右侧详情卡片或弹窗
- 可折叠收起

---

## 五、数据来源与接口说明

### 数据来源：币安合约 API

主要接口（建议使用子账号的只读权限）：

| 接口 | 功能 |
|------|------|
| `GET /fapi/v2/account` | 获取当前账户资产信息 |
| `GET /fapi/v1/income` | 获取账户资金流水（盈亏、手续费等） |
| `GET /fapi/v1/positionRisk` | 当前持仓列表 |
| `GET /fapi/v1/userTrades` | 用户历史成交明细 |
| `GET /fapi/v1/allOrders` | 获取历史订单记录 |

> **建议：**
> - 本地缓存近期数据，减少 API 频率限制问题
> - 支持 CSV 本地数据导入用于离线调试和复盘回放

---

## 六、技术建议

| 项目 | 推荐技术 |
|------|----------|
| 前端框架 | Vue3 + TypeScript + Pinia |
| UI 框架 | Element Plus / Naive UI / Tailwind |
| 图表库 | Echarts / TradingView Charts |
| 数据管理 | 根据时间维度索引、分页管理 |
| 后端 | 可选使用 Node.js 中转数据、聚合 API 请求 |

---

## 七、后续可扩展功能（预留）

- 自动生成复盘报告（PDF导出）
- AI 总结每日操作建议
- 多账户切换复盘支持
- Telegram 机器人发送每日盈亏总结
- 交易标注和备注支持（手动添加策略备注）

---

## 八、备注

- 所有资产金额建议保留 2~4 位小数，默认展示为 USDT，可支持 BTC 等单位切换
- 所有图表交互应支持缩放、Hover、筛选联动
